<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8>
  <title>Ball Shadow</title>
  <link rel="stylesheet" href="css/main.css" type="text/css"></link>
</head>
<body>
<video class="hide" width="300" height="400" autoplay></video>
<div id="qrcode" class="hide"></div>
<div id="textures">
  <img src="img/white.png">
  <img src="img/r2b.jpg">
  <img src="img/b2r.jpg">
  <img src="img/texture.png">
  <img src="img/soil.png">
  <img src="img/iron.png">
  <img src="img/movie.png" style="display:none;">
  <img src="img/phone.png">
</div>
<div id="geometries">
  <button>sphere</button>
  <button>torus</button>
  <button>torusKnot</button>
  <button>yoda</button>
</div>
<div id="foot">
  <a href="http://dcgi.fel.cvut.cz/home/sykorad/stylit" target="_blank">Inspired by http://dcgi.fel.cvut.cz/home/sykorad/stylit</a>
</div>
<canvas id="texture" class="hide" width="400" height="400"></canvas>
<script src="https://skyway.io/dist/0.3/peer.js"></script>
<script src="lib/three.js"></script>
<script src="lib/OrbitControls.js"></script>
<script src="lib/STLLoader.js"></script>
<script src="lib/qrcode.js"></script>
<script src="js/ballshadow.js"></script>
<script>
var peer = new Peer({key: '743eda5e-f6f2-42f1-867e-a7d767c12bd9'});
peer.on('open', function(id) {
  new QRCode(qrcode, {
    text: window.location + 'camera.html#' + id,
    width: 128,
    height: 128
  });
});
peer.on('call', function(call) {
  call.on('stream', function(stream) {
    video.src = window.URL.createObjectURL(stream);
  });
  call.answer();
});
peer.on('connection', function(conn) {
  conn.on('open', function() {
    conn.on('data', function(data) {
      console.log('received: ' + data);
      if (data === 'freeze') {
        video.click();
      }
    });
  });
});
</script>
</body>
</html>
